# Btrfs快照管理器日志轮转配置
# 放置到 /etc/logrotate.d/btrfs-snapshot-manager

/var/log/btrfs-snapshot-manager/*.log {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
    postrotate
        # 重新加载Docker容器日志
        docker-compose -f /opt/btrfs-snapshot-manager/docker-compose.yml kill -s USR1 btrfs-api 2>/dev/null || true
    endscript
}

/var/log/btrfs-deploy.log {
    weekly
    rotate 12
    compress
    delaycompress
    missingok
    notifempty
    create 644 root root
}